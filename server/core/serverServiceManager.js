'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
var _ctors = {};
var _instances = {};

var serverServiceManager = {
  require: function require(id) {
    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];

    id = 'service:' + id;

    if (!_ctors[id]) throw new Error('Service "' + id + '" does not exists');

    var instance = _instances[id];

    if (!instance) {
      instance = new _ctors[id]();
      _instances[id] = instance;
    }

    instance.configure(options);
    return instance;
  },

  register: function register(id, ctor) {
    _ctors[id] = ctor;
  }
};

exports['default'] = serverServiceManager;
module.exports = exports['default'];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9zZXJ2ZXIvY29yZS9zZXJ2ZXJTZXJ2aWNlTWFuYWdlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLElBQU0sTUFBTSxHQUFHLEVBQUUsQ0FBQztBQUNsQixJQUFNLFVBQVUsR0FBRyxFQUFFLENBQUM7O0FBRXRCLElBQU0sb0JBQW9CLEdBQUc7QUFDM0IsU0FBTyxFQUFBLGlCQUFDLEVBQUUsRUFBZ0I7UUFBZCxPQUFPLHlEQUFHLEVBQUU7O0FBQ3RCLE1BQUUsR0FBRyxVQUFVLEdBQUcsRUFBRSxDQUFDOztBQUVyQixRQUFJLENBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUNiLE1BQU0sSUFBSSxLQUFLLGVBQWEsRUFBRSx1QkFBb0IsQ0FBQzs7QUFFckQsUUFBSSxRQUFRLEdBQUcsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDOztBQUU5QixRQUFJLENBQUMsUUFBUSxFQUFFO0FBQ2IsY0FBUSxHQUFHLElBQUksTUFBTSxDQUFDLEVBQUUsQ0FBQyxFQUFBLENBQUM7QUFDMUIsZ0JBQVUsQ0FBQyxFQUFFLENBQUMsR0FBRyxRQUFRLENBQUM7S0FDM0I7O0FBRUQsWUFBUSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUM1QixXQUFPLFFBQVEsQ0FBQztHQUNqQjs7QUFFRCxVQUFRLEVBQUEsa0JBQUMsRUFBRSxFQUFFLElBQUksRUFBRTtBQUNqQixVQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsSUFBSSxDQUFDO0dBQ25CO0NBQ0YsQ0FBQzs7cUJBRWEsb0JBQW9CIiwiZmlsZSI6InNyYy9zZXJ2ZXIvY29yZS9zZXJ2ZXJTZXJ2aWNlTWFuYWdlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IF9jdG9ycyA9IHt9O1xuY29uc3QgX2luc3RhbmNlcyA9IHt9O1xuXG5jb25zdCBzZXJ2ZXJTZXJ2aWNlTWFuYWdlciA9IHtcbiAgcmVxdWlyZShpZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgaWQgPSAnc2VydmljZTonICsgaWQ7XG5cbiAgICBpZiAoIV9jdG9yc1tpZF0pXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYFNlcnZpY2UgXCIke2lkfVwiIGRvZXMgbm90IGV4aXN0c2ApO1xuXG4gICAgbGV0IGluc3RhbmNlID0gX2luc3RhbmNlc1tpZF07XG5cbiAgICBpZiAoIWluc3RhbmNlKSB7XG4gICAgICBpbnN0YW5jZSA9IG5ldyBfY3RvcnNbaWRdO1xuICAgICAgX2luc3RhbmNlc1tpZF0gPSBpbnN0YW5jZTtcbiAgICB9XG5cbiAgICBpbnN0YW5jZS5jb25maWd1cmUob3B0aW9ucyk7XG4gICAgcmV0dXJuIGluc3RhbmNlO1xuICB9LFxuXG4gIHJlZ2lzdGVyKGlkLCBjdG9yKSB7XG4gICAgX2N0b3JzW2lkXSA9IGN0b3I7XG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBzZXJ2ZXJTZXJ2aWNlTWFuYWdlcjtcbiJdfQ==